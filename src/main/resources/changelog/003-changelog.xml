<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="003" author="vitikova" dbms="postgresql">
        <sql>
            CREATE TABLE "public"."house"
            (
                "id"          bigint DEFAULT nextval('house_id_seq') NOT NULL,
                "uuid"        uuid                                   NOT NULL,
                "area"        character varying(255)                 NOT NULL,
                "country"     character varying(255)                 NOT NULL,
                "city"        character varying(255)                 NOT NULL,
                "street"      character varying(255)                 NOT NULL,
                "number"      integer                                NOT NULL,
                "create_date" timestamp(6),
                CONSTRAINT "house_pkey" PRIMARY KEY ("id"),
                CONSTRAINT "house_uuid_key" UNIQUE ("uuid")
            ) WITH (oids = false);

            CREATE TABLE "public"."house_history"
            (
                "id"        bigint DEFAULT nextval('house_history_id_seq') NOT NULL,
                "house_id"  bigint,
                "person_id" bigint,
                "date"      timestamp(6),
                "type"      type,
                CONSTRAINT "house_history_pkey" PRIMARY KEY ("id")
            ) WITH (oids = false);

            CREATE TABLE "public"."person"
            (
                "id"              bigint DEFAULT nextval('person_id_seq') NOT NULL,
                "uuid"            uuid                                    NOT NULL,
                "name"            character varying(255)                  NOT NULL,
                "surname"         character varying(255)                  NOT NULL,
                "sex"             character varying(255)                  NOT NULL,
                "passport_series" character varying(255),
                "passport_number" character varying(255),
                "create_date"     timestamp(6),
                "update_date"     timestamp(6),
                "house_id"        bigint                                  NOT NULL,
                CONSTRAINT "person_passport_series_passport_number_key" UNIQUE ("passport_series", "passport_number"),
                CONSTRAINT "person_pkey" PRIMARY KEY ("id"),
                CONSTRAINT "person_uuid_key" UNIQUE ("uuid")
            ) WITH (oids = false);

            CREATE TABLE "public"."house_owner"
            (
                "house_id"  bigint NOT NULL,
                "person_id" bigint NOT NULL
            ) WITH (oids = false);
        </sql>
    </changeSet>

</databaseChangeLog>